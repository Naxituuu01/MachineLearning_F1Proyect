# ======================================================
# RAW DATASETS (data/01_raw)
# ======================================================

qualifying_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/qualifying.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

driver_standings_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/driver_standings.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

constructor_standings_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/constructor_standings.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

races_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/races.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

drivers_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/drivers.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

results_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/results.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

constructors_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/constructors.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

circuits_raw:
  type: pandas.CSVDataset
  filepath: data/01_raw/circuits.csv
  load_args:
    encoding: "latin-1"
    na_values: ["\\N"]

# ======================================================
# INTERMEDIATE DATASETS (in-memory)
# ======================================================

f1_integrated:
  type: MemoryDataset

f1_features:
  type: MemoryDataset

# ======================================================
# PRIMARY DATASETS (disk)
# ======================================================

clean_f1_data:
  type: pandas.CSVDataset
  filepath: data/03_primary/clean_f1_data.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

# ======================================================
# MODEL INPUT DATASETS (disk) - Evaluación 2
# ======================================================

model_input_classification:
  type: pandas.CSVDataset
  filepath: data/05_model_input/model_input_classification.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

model_input_regression:
  type: pandas.CSVDataset
  filepath: data/05_model_input/model_input_regression.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

model_input_classification_with_clusters:
  type: pandas.CSVDataset
  filepath: data/05_model_input/model_input_classification_with_clusters.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

# ======================================================
# REPORTING / METRICS (disk) - Evaluación 2
# ======================================================

classification_metrics_table:
  type: pandas.CSVDataset
  filepath: data/08_reporting/classification_metrics_table.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

regression_metrics_table:
  type: pandas.CSVDataset
  filepath: data/08_reporting/regression_metrics_table.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

# ======================================================
# REPORTING / PREDICTIONS + FEATURE IMPORTANCES (disk)
# ======================================================

regression_predictions_test:
  type: pandas.CSVDataset
  filepath: data/08_reporting/regression_predictions_test.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

regression_feature_importances:
  type: pandas.CSVDataset
  filepath: data/08_reporting/regression_feature_importances.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

# ======================================================
# OPTIONAL: Keep old in-memory metrics to avoid breaking old pipeline code
# ======================================================

classification_metrics:
  type: MemoryDataset

regression_metrics:
  type: MemoryDataset

# ======================================================
# MODELS (disk) - Evaluación 2
# ======================================================

best_model_classification:
  type: pickle.PickleDataset
  filepath: data/06_models/best_model_classification.pkl

best_model_regression:
  type: pickle.PickleDataset
  filepath: data/06_models/best_model_regression.pkl

# ======================================================
# REPORTING / SUMMARIES (disk) - Evaluación 2
# ======================================================

classification_metrics_summary:
  type: kedro_datasets.json.JSONDataset
  filepath: data/08_reporting/classification_metrics_summary.json

regression_metrics_summary:
  type: kedro_datasets.json.JSONDataset
  filepath: data/08_reporting/regression_metrics_summary.json

# ======================================================
# REPORTING / PLOTS (disk) - Evaluación 2
# ======================================================

classification_metrics_plot:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/classification_metrics.png

regression_metrics_plot:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/regression_metrics.png

# ======================================================
# OPTIONAL (in-memory bridge)
# ======================================================

best_model_classification_mem:
  type: MemoryDataset

best_model_regression_mem:
  type: MemoryDataset

classification_metrics_summary_mem:
  type: MemoryDataset

regression_metrics_summary_mem:
  type: MemoryDataset

# ======================================================
# OPTIONAL: Datasets for clustering pipeline - Evaluación 3
# ======================================================

clustering_race_features:
  type: pandas.CSVDataset
  filepath: data/04_feature/clustering_race_features.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

clustering_labels_race:
  type: pandas.CSVDataset
  filepath: data/04_feature/clustering_labels_race.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

clustering_metrics:
  type: kedro_datasets.json.JSONDataset
  filepath: data/08_reporting/clustering_metrics.json

clustering_plot_elbow:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/clustering_elbow.png

clustering_plot_silhouette:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/clustering_silhouette.png

clustering_plot_pca2d:
  type: matplotlib.MatplotlibWriter
  filepath: data/08_reporting/clustering_pca2d.png

clustering_bundle:
  type: pickle.PickleDataset
  filepath: data/06_models/clustering_bundle.pkl

model_input_regression_with_clusters:
  type: pandas.CSVDataset
  filepath: data/05_model_input/model_input_regression_with_clusters.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"

# (Opcional pero recomendado para informe)
clustering_cluster_profile:
  type: pandas.CSVDataset
  filepath: data/08_reporting/clustering_cluster_profile.csv
  load_args:
    encoding: "utf-8-sig"
  save_args:
    index: false
    encoding: "utf-8-sig"
